{% extends "base.html" %}

{% block title %}Dashboard - StudyMate{% endblock %}

{% block content %}
<link rel="stylesheet" href="{{ url_for('static', filename='dashboard.css') }}">

<div class="vscode-layout">
    <!-- LEFT SIDEBAR: Navigation Icons + Expandable Panel -->
    <div class="sidebar-container">
        <!-- Icon Bar -->
        <div class="icon-bar">
            <div class="icon-item active" data-panel="topics" title="Topics">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path>
                </svg>
            </div>
            
            <div class="icon-item" data-panel="resources" title="Resources">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path>
                    <polyline points="13 2 13 9 20 9"></polyline>
                </svg>
            </div>
            
            <div class="icon-item" data-panel="notes" title="Notes">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                    <polyline points="14 2 14 8 20 8"></polyline>
                    <line x1="16" y1="13" x2="8" y2="13"></line>
                    <line x1="16" y1="17" x2="8" y2="17"></line>
                    <polyline points="10 9 9 9 8 9"></polyline>
                </svg>
            </div>
            
            <div class="icon-item" data-panel="exercises" title="Exercises">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"></path>
                </svg>
            </div>
            
            <div class="spacer"></div>
            
            <div class="icon-item" data-panel="settings" title="Settings">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="3"></circle>
                    <path d="M12 1v6m0 6v6m7.07-7.07l-4.24 4.24m0-8.48l4.24 4.24m-14.14 0l4.24-4.24m0 8.48l-4.24-4.24"></path>
                </svg>
            </div>
            
            <div class="icon-item" title="Logout">
                <a href="{{ url_for('auth.logout') }}" style="color: inherit; text-decoration: none;">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                        <polyline points="16 17 21 12 16 7"></polyline>
                        <line x1="21" y1="12" x2="9" y2="12"></line>
                    </svg>
                </a>
            </div>
        </div>
        
        <!-- Expandable Side Panel -->
        <div class="side-panel" id="sidePanel">
            <!-- TOPICS PANEL -->
            <div class="panel-content active" id="panel-topics">
                <div class="panel-header">
                    <h2>Topics</h2>
                    <button class="btn-icon" title="Add Topic">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="12" y1="5" x2="12" y2="19"></line>
                            <line x1="5" y1="12" x2="19" y2="12"></line>
                        </svg>
                    </button>
                </div>
                <div class="panel-body">
                    <!-- TODO: Insert topic list here -->
                    <!-- Example structure:
                    <div class="list-item">
                        <span class="item-icon">üìö</span>
                        <span class="item-title">Computer Science</span>
                    </div>
                    -->
                    <p class="placeholder-text">No topics yet. Create your first topic to get started!</p>
                </div>
            </div>
            
            <!-- RESOURCES PANEL -->
            <div class="panel-content" id="panel-resources">
                <div class="panel-header">
                    <h2>Resources</h2>
                    <button class="btn-icon" title="Add Resource">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="12" y1="5" x2="12" y2="19"></line>
                            <line x1="5" y1="12" x2="19" y2="12"></line>
                        </svg>
                    </button>
                </div>
                <div class="panel-body">
                    <!-- TODO: Insert resources list here -->
                    <!-- Example structure:
                    <div class="list-item">
                        <span class="status-badge not-started">Not Started</span>
                        <span class="item-title">https://example.com/article</span>
                    </div>
                    -->
                    <p class="placeholder-text">Select a topic to view its resources</p>
                </div>
            </div>
            
            <!-- NOTES PANEL -->
            <div class="panel-content" id="panel-notes">
                <div class="panel-header">
                    <h2>Notes</h2>
                    <button class="btn-icon" title="New Note">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="12" y1="5" x2="12" y2="19"></line>
                            <line x1="5" y1="12" x2="19" y2="12"></line>
                        </svg>
                    </button>
                </div>
                <div class="panel-body">
                    <!-- TODO: Insert notes list here -->
                    <!-- Example structure:
                    <div class="list-item">
                        <span class="item-title">Chapter 1 Notes</span>
                        <span class="item-meta">2 days ago</span>
                    </div>
                    -->
                    <p class="placeholder-text">Select a resource to view or create notes</p>
                </div>
            </div>
            
            <!-- EXERCISES PANEL -->
            <div class="panel-content" id="panel-exercises">
                <div class="panel-header">
                    <h2>Exercises</h2>
                    <button class="btn-icon" title="Generate Exercises">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="23 4 23 10 17 10"></polyline>
                            <path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"></path>
                        </svg>
                    </button>
                </div>
                <div class="panel-body">
                    <!-- TODO: Insert exercises list here -->
                    <!-- Example structure:
                    <div class="list-item">
                        <span class="item-title">Practice Set 1</span>
                        <span class="item-meta">10 questions</span>
                    </div>
                    -->
                    <p class="placeholder-text">Generate AI exercises based on your notes</p>
                </div>
            </div>
            
            <!-- SETTINGS PANEL -->
            <div class="panel-content" id="panel-settings">
                <div class="panel-header">
                    <h2>Settings</h2>
                </div>
                <div class="panel-body">
                    <!-- TODO: Insert settings options here -->
                    <div class="settings-group">
                        <h3>Account</h3>
                        <p class="placeholder-text">User: {{ current_user.email if current_user else 'Guest' }}</p>
                    </div>
                    <div class="settings-group">
                        <h3>Preferences</h3>
                        <p class="placeholder-text">Theme, notifications, etc.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- MAIN CONTENT AREA -->
    <div class="main-content">
        <div class="content-header">
            <h1 class="content-title">Welcome to StudyMate</h1>
            <div class="breadcrumb">
                <!-- TODO: Insert breadcrumb navigation here -->
                <span>Dashboard</span>
            </div>
        </div>
        
        <div class="content-body">
            <!-- TODO: Insert main content here based on selected item -->
            <!-- This is where you'll display:
                 - Topic details and resources
                 - Resource content and notes editor
                 - Exercise viewer
                 - Settings forms
            -->
            
            <div class="welcome-section">
                <div class="welcome-card">
                    <h2>üéØ Get Started</h2>
                    <p>Create your first topic to organize your learning materials</p>
                    <button class="btn-primary">Create Topic</button>
                </div>
                
                <div class="welcome-card">
                    <h2>üìö Add Resources</h2>
                    <p>Add links to articles, videos, and other learning materials</p>
                    <button class="btn-secondary">Add Resource</button>
                </div>
                
                <div class="welcome-card">
                    <h2>‚úçÔ∏è Take Notes</h2>
                    <p>Write and organize notes for each resource you study</p>
                    <button class="btn-secondary">View Notes</button>
                </div>
                
                <div class="welcome-card">
                    <h2>ü§ñ Practice with AI</h2>
                    <p>Generate exercises based on your notes to test your knowledge</p>
                    <button class="btn-secondary">Generate Exercises</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- RIGHT PANEL: AI Agent Chat -->
    <div class="chat-panel">
        <div class="chat-header">
            <div class="chat-title">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
                </svg>
                <span>AI Study Assistant</span>
            </div>
            <button class="btn-icon" title="Clear Chat">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polyline points="3 6 5 6 21 6"></polyline>
                    <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                </svg>
            </button>
        </div>
        
        <div class="chat-messages" id="chatMessages">
            <!-- TODO: Insert chat messages here -->
            <!-- Example structure:
            <div class="message user-message">
                <div class="message-content">Hello!</div>
            </div>
            <div class="message ai-message">
                <div class="message-content">Hi! How can I help you study today?</div>
            </div>
            -->
            <div class="chat-welcome">
                <div class="ai-avatar">ü§ñ</div>
                <h3>Hello! I'm your AI Study Assistant</h3>
                <p>I can help you:</p>
                <ul>
                    <li>Generate practice exercises</li>
                    <li>Answer questions about your notes</li>
                    <li>Suggest study strategies</li>
                </ul>
                <p class="chat-hint">Start by asking me anything!</p>
            </div>
        </div>
        
        <div class="chat-input-container">
            <textarea 
                class="chat-input" 
                placeholder="Ask me anything about your studies..."
                rows="1"
                id="chatInput"
            ></textarea>
            <button class="btn-send" id="sendBtn">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="22" y1="2" x2="11" y2="13"></line>
                    <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
                </svg>
            </button>
        </div>
    </div>
</div>

<script>
    // Panel switching logic
    document.querySelectorAll('.icon-item').forEach(icon => {
        icon.addEventListener('click', function() {
            const panelName = this.dataset.panel;
            if (!panelName) return;
            
            // Update active icon
            document.querySelectorAll('.icon-item').forEach(i => i.classList.remove('active'));
            this.classList.add('active');
            
            // Update active panel
            document.querySelectorAll('.panel-content').forEach(p => p.classList.remove('active'));
            document.getElementById(`panel-${panelName}`).classList.add('active');
        });
    });
    
    // Chat input auto-resize
    const chatInput = document.getElementById('chatInput');
    if (chatInput) {
        chatInput.addEventListener('input', function() {
            this.style.height = 'auto';
            this.style.height = Math.min(this.scrollHeight, 120) + 'px';
        });
    }
    
    // Send message functionality (placeholder)
    const sendBtn = document.getElementById('sendBtn');
    if (sendBtn) {
        sendBtn.addEventListener('click', function() {
            // TODO: Implement chat send functionality
            console.log('Send message:', chatInput.value);
        });
        
        chatInput.addEventListener('keydown', function(e) {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                sendBtn.click();
            }
        });
    }
</script>

{% endblock %}